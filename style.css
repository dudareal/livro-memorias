/* ====== Tema base ====== */
:root{
  --bg: #fff;
  --bg-soft: #f6f7f9;
  --text: #1a1a1a;
  --muted: #5b5f6a;
  --card: #ffffff;
  --primary: #ff477e;
  --primary-600: #e13d6f;
  --ring: rgba(255,71,126,.35);
  --shadow: 0 10px 30px rgba(0,0,0,.06);
  --radius: 14px;
  --font: ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji';
}

:root.dark{
  --bg: #0f1115;
  --bg-soft: #161920;
  --text: #eef2f7;
  --muted: #98a2b3;
  --card: #171a22;
  --primary: #ff6b9a;
  --primary-600: #ff477e;
  --ring: rgba(255,107,154,.3);
  --shadow: 0 10px 30px rgba(0,0,0,.4);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--font);
  background:var(--bg);
  color:var(--text);
  line-height:1.6;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

img{max-width:100%; display:block; border-radius:12px}
a{color:var(--primary); text-decoration:none}
a:hover{text-decoration:underline}

/* Acessibilidade */
.sr-only{position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden}
.skip-link{
  position:absolute; left:1rem; top:-100px; padding:.5rem .75rem; background:var(--card);
  border-radius:8px; box-shadow:var(--shadow); transition:top .2s ease
}
.skip-link:focus{top:1rem}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:50; display:flex; align-items:center; justify-content:space-between;
  gap:1rem; padding:.75rem 1rem; background:color-mix(in oklab, var(--bg), #000 3%);
  border-bottom:1px solid color-mix(in oklab, var(--bg), #000 8%);
  backdrop-filter:saturate(140%) blur(8px);
}
.topbar .logo{filter: drop-shadow(0 4px 8px var(--ring));}
.top-actions{display:flex; gap:.25rem; align-items:center}
.icon-btn, .menu-btn, .cta, .btn{
  border:0; border-radius:12px; padding:.6rem .9rem; font-weight:600; cursor:pointer;
  background:var(--bg-soft); color:var(--text); box-shadow:var(--shadow); transition:transform .12s ease, background .2s
}
.icon-btn:hover, .menu-btn:hover, .cta:hover, .btn:hover{transform:translateY(-1px)}
.cta, .btn{background:var(--primary); color:white}
.btn[disabled]{opacity:.6; cursor:not-allowed}

/* Layout */
.app{display:grid; grid-template-columns: 320px 1fr; min-height:calc(100vh - 64px)}
.sidebar{
  position:sticky; top:64px; height:calc(100vh - 64px); overflow:auto; border-right:1px solid color-mix(in oklab, var(--bg), #000 8%);
  background:var(--bg);
}
.sidebar-inner{padding:1rem; display:flex; flex-direction:column; gap:1rem}
.perfil{display:flex; gap:.75rem; align-items:center}
.perfil-foto{width:56px; height:56px; object-fit:cover; border-radius:50%}
.busca{
  width:100%; padding:.7rem .9rem; border-radius:12px; border:1px solid color-mix(in oklab, var(--bg), #000 10%);
  background:var(--bg-soft); outline:2px solid transparent; outline-offset:2px;
}
.busca:focus{outline-color:var(--ring)}
.capitulos{margin:0; padding:0; list-style:none; display:flex; flex-direction:column; gap:.35rem}
.capitulos .capitulo-link{
  width:100%; text-align:left; border:0; background:transparent; padding:.6rem .5rem; border-radius:10px; cursor:pointer;
}
.capitulos .capitulo-link:hover, .capitulos .capitulo-link[aria-current="page"]{
  background:color-mix(in oklab, var(--primary), var(--bg) 84%)
}
.side-footer{margin-top:auto; color:var(--muted)}

/* Conteúdo */
.conteudo{padding:2rem; max-width:1100px; width:100%; margin:0 auto}
.capa{
  display:grid; gap:1rem; place-items:start; padding:2rem; background:linear-gradient(120deg, color-mix(in oklab, var(--primary), #fff 70%), transparent 50%), var(--card);
  border-radius:var(--radius); box-shadow:var(--shadow)
}
.capa h2{font-size:clamp(1.6rem, 1rem + 2vw, 2.2rem)}
.capa p{max-width:60ch}
.timeline{margin-top:2rem}
.lista-timeline{list-style:none; padding:0; margin:0; position:relative}
.lista-timeline::before{
  content:""; position:absolute; left:12px; top:0; bottom:0; width:2px; background:color-mix(in oklab, var(--text), transparent 80%)
}
.timeline-item{display:grid; grid-template-columns:24px 1fr; gap:.75rem; margin:1rem 0}
.timeline-item .dot{width:16px; height:16px; border-radius:50%; background:var(--primary); margin-top:.25rem; box-shadow:0 0 0 4px var(--ring)}
.timeline-item .card{
  background:var(--card); border-radius:12px; box-shadow:var(--shadow); padding:1rem;
}
.timeline-item .data{color:var(--muted); font-size:.9rem; display:block; margin-bottom:.25rem}

.capitulo{margin-top:2rem}
.capitulo-header{display:grid; gap:.25rem; margin-bottom:1rem}
.capitulo-subtitulo{color:var(--muted)}
.galeria{display:grid; grid-template-columns:repeat(auto-fit, minmax(50px, 1fr)); gap:.75rem; margin:1rem 0}
.capitulo-texto{font-size:1.05rem}
.capitulo-extra{display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; margin-top:1rem}

/* Ajuste das imagens do content.json */
.galeria img {
    width: 300px;      /* largura desejada */
    height: 300px;     /* altura desejada */
    object-fit: cover; /* mantém proporção e recorta se necessário */
    border-radius: 12px; /* cantos arredondados */
}

/* Mobile */
@media (max-width: 900px){
  .app{grid-template-columns: 1fr}
  .sidebar{position:fixed; left:0; top:64px; width:min(92vw, 360px); transform:translateX(-105%); transition:transform .2s ease; box-shadow:var(--shadow)}
  .sidebar.open{transform:translateX(0)}
  .conteudo{padding:1rem}
}

/* Impressão */
@media print{
  .sidebar, .topbar, .capitulo-extra, .capa .cta{display:none !important}
  .conteudo{max-width:100%; padding:0}
  body{background:white; color:black}
}

/* Respeita usuários com movimento reduzido */
@media (prefers-reduced-motion: reduce){
  *{transition:none !important; animation:none !important}
}
